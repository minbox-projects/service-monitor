# Monitoring Configuration

# Email Settings
email:
  smtp_server: "smtp.qiye.aliyun.com"
  smtp_port: 465
  username: "service@legutech.com"
  password: "Wd2x9nPs4BEXdPdD"
  sender: "service@legutech.com"
  use_ssl: true
  use_tls: false
  receivers:
    - "yuqiyu@legutech.com"

# Global Alert Settings
alert_config:
  cooldown_seconds: 300       # Cooldown for same alert type
  aggregation_window: 60      # Wait time to collect alerts before sending (batching)

# Global Error Keywords (Regex supported)
error_keywords:
  - "OutOfMemoryError"
  - "Java heap space"

# Scheduled Reporting times
reporting:
  times:
    - "08:00"
    - "17:00"

# Services to Monitor
services:
  - name: "metadata-service-api-master"
    docker_container_name: "metadata-service-api-master"
    log_file_path: "/home/huanwei/metadata-service-api-master/logs/error/latest.log"
    metrics:
      memory_threshold: 80
      cpu_threshold: 90
    log_rules:
      error_threshold_count: 1
      error_threshold_window: 60

  - name: "metadata-service-api-slave"
    docker_container_name: "metadata-service-api-slave"
    log_file_path: "/home/huanwei/metadata-service-api-slave/logs/error/latest.log"
    metrics:
      memory_threshold: 80
      cpu_threshold: 90
    log_rules:
      error_threshold_count: 1
      error_threshold_window: 60

  - name: "task-schedule"
    docker_container_name: "task-schedule"
    log_file_path: "/home/huanwei/task-schedule/logs/error/latest.log"
    metrics:
      memory_threshold: 80
      cpu_threshold: 90
    log_rules:
      error_threshold_count: 1
      error_threshold_window: 60

  - name: "metadata-service-basic"
    docker_container_name: "metadata-service-basic"
    log_file_path: "/home/huanwei/metadata-service-basic/logs/error/latest.log"
    metrics:
      memory_threshold: 80
      cpu_threshold: 90
    log_rules:
      error_threshold_count: 1
      error_threshold_window: 60

  - name: "metadata-service-analysis"
    docker_container_name: "metadata-service-analysis"
    log_file_path: "/home/huanwei/metadata-service-analysis/logs/error/latest.log"
    metrics:
      memory_threshold: 80
      cpu_threshold: 90
    log_rules:
      error_threshold_count: 1
      error_threshold_window: 60

  - name: "generate-daily-job"
    docker_container_name: "generate-daily-job"
    log_file_path: "/home/huanwei/generate-daily-job/logs/error/latest.log"
    metrics:
      memory_threshold: 80
      cpu_threshold: 90
    log_rules:
      error_threshold_count: 1
      error_threshold_window: 60

  - name: "simulation-task-executor"
    docker_container_name: "simulation-task-executor"
    log_file_path: "/home/huanwei/simulation-task-executor/logs/error/latest.log"
    metrics:
      memory_threshold: 80
      cpu_threshold: 90
    log_rules:
      error_threshold_count: 1
      error_threshold_window: 60

  - name: "saas-ui-master"
    docker_container_name: "saas-ui-master"
    metrics:
      memory_threshold: 80
      cpu_threshold: 90

  - name: "saas-ui-slave"
    docker_container_name: "saas-ui-slave"
    metrics:
      memory_threshold: 80
      cpu_threshold: 90